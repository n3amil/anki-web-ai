<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ankiki Flashcard Creator</title>
    <link rel="stylesheet" href="style.css?v=1769804438">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4a90e2">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <script src="vendor/pdf.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <span class="nav-brand">Ankiki</span>
            <div class="lang-switcher">
                <button class="lang-btn" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="de">DE</button>
            </div>
        </div>
    </nav>
    <div class="container">
        <header>
            <h1 data-i18n="app-title">Ankiki</h1>
            <p data-i18n="app-subtitle">Generate flashcards from PDF or Text</p>
        </header>

        <section id="settings">
            <h2 data-i18n="settings-title">AI Settings</h2>
            <div class="form-group">
                <label for="ai-provider" data-i18n="provider-label">Provider:</label>
                <select id="ai-provider">
                    <option value="openai">OpenAI</option>
                    <option value="gemini">Gemini</option>
                    <option value="mistral">Mistral</option>
                    <option value="perplexity">Perplexity</option>
                    <option value="ollama">Ollama (Local)</option>
                    <option value="lmstudio">LMStudio (Local)</option>
                </select>
            </div>
            <div class="form-group" id="api-key-group">
                <div class="label-with-link">
                    <label for="api-key" id="api-key-label" data-i18n="api-key-label">API Key:</label>
                    <a id="api-key-link" href="https://platform.openai.com/api-keys" target="_blank" class="help-link" data-i18n="get-key-link">Get API Key</a>
                </div>
                <input type="password" id="api-key" placeholder="Enter API Key">
                <p class="warning-text" data-i18n="api-key-warning">Security Note: Never share your API token. It is stored only in your browser and is never uploaded. Please monitor your usage.</p>
            </div>
            <div class="form-group" id="model-group">
                <div class="label-with-link">
                    <label for="ai-model" data-i18n="model-label">Model:</label>
                    <a id="model-link" href="https://platform.openai.com/docs/models" target="_blank" class="help-link" data-i18n="view-models-link">View Models</a>
                </div>
                <div class="model-input-container">
                    <input type="text" id="ai-model" placeholder="gpt-3.5-turbo / gemini-pro / model-name">
                    <button id="fetch-models-btn" class="secondary-btn" data-i18n="fetch-models-btn">Fetch Models</button>
                </div>
            </div>
            <div class="settings-actions">
                <button id="save-settings-btn" data-i18n="save-settings-btn">Save Settings</button>
                <p class="hint-text" data-i18n="settings-hint">Note: Settings are saved in your browser's local storage. They may be lost if you clear your browser data.</p>
            </div>
        </section>

        <section id="input-section">
            <h2 data-i18n="input-title">Input Source</h2>
            <div class="tabs">
                <button class="tab-btn active" data-tab="text-input" data-i18n="tab-text">Text</button>
                <button class="tab-btn" data-tab="pdf-input" data-i18n="tab-pdf">PDF</button>
            </div>
            <div id="text-input" class="tab-content active">
                <textarea id="raw-text" placeholder="Paste your text here..."></textarea>
            </div>
            <div id="pdf-input" class="tab-content">
                <input type="file" id="pdf-file" accept="application/pdf">
                <div class="form-group" style="margin-top: 10px;">
                    <label for="pdf-pages" data-i18n="pdf-pages-label">Pages (e.g., all, 1-5, 8):</label>
                    <input type="text" id="pdf-pages" data-i18n-placeholder="placeholder-pdf-pages">
                </div>
                <div id="pdf-status"></div>
            </div>
            <button id="generate-btn" data-i18n="generate-btn">Generate Flashcards</button>
            <div class="form-group" id="prompt-group">
                <div class="label-row">
                    <label for="card-count" data-i18n="card-count-label">Number of flashcards:</label>
                    <input type="number" id="card-count" value="10" min="1" max="50" style="width: 80px;">
                </div>
                <div class="form-group">
                    <label for="ignore-prompt" data-i18n="ignore-prompt-label">Ignore from input (optional):</label>
                    <input type="text" id="ignore-prompt" data-i18n-placeholder="placeholder-ignore-prompt">
                </div>
                <label for="custom-prompt" data-i18n="prompt-label">Custom Prompt:</label>
                <textarea id="custom-prompt" data-i18n-placeholder="placeholder-prompt"></textarea>
            </div>
        </section>

        <section id="output-section">
            <h2 data-i18n="output-title">Generated Flashcards</h2>
            <div id="loading-spinner" class="spinner"></div>
            <div id="flashcards-list"></div>
            <div class="actions">
                <button id="download-csv" disabled data-i18n="download-btn">Download for Anki (.csv)</button>
            </div>
        </section>

        <section id="faq-section">
            <h2 data-i18n="faq-title">Frequently Asked Questions</h2>
            <div class="faq-container">
                <details>
                    <summary data-i18n="faq-import-desktop-q">How do I import the CSV into Anki on Desktop?</summary>
                    <div class="faq-answer" data-i18n="faq-import-desktop-a">
                        1. Open Anki on your computer.<br>
                        2. Click "File" -> "Import" at the top left.<br>
                        3. Select the downloaded .csv file.<br>
                        4. Select your deck and ensure "Fields separated by" is set to Pipe.<br>
                        5. Map the fields (usually Front and Back) and click "Import".
                    </div>
                </details>
                <details>
                    <summary data-i18n="faq-import-android-q">How do I import into AnkiDroid (Android)?</summary>
                    <div class="faq-answer" data-i18n="faq-import-android-a">
                        1. Transfer the .csv file to your phone.<br>
                        2. Open AnkiDroid.<br>
                        3. Tap the three dots (menu) and select "Import".<br>
                        4. Pick the .csv file and follow the mapping instructions.
                    </div>
                </details>
                <details>
                    <summary data-i18n="faq-import-ios-q">How do I import into AnkiMobile (iOS)?</summary>
                    <div class="faq-answer" data-i18n="faq-import-ios-a">
                        1. Send the .csv file to your iPhone/iPad (e.g., via iCloud Drive, AirDrop, or Email).<br>
                        2. Open the "Files" app and tap on the file.<br>
                        3. Tap the Share icon and select "Anki".<br>
                        4. AnkiMobile will open and guide you through the import process.
                    </div>
                </details>
                <details>
                    <summary data-i18n="faq-trust-q">Can I trust the generated cards?</summary>
                    <div class="faq-answer" data-i18n="faq-trust-a">
                        No, you should always validate and check the generated cards. AI can sometimes make mistakes, hallucinate facts, or misinterpret the context of the input text.
                    </div>
                </details>
                <details>
                    <summary data-i18n="faq-copyright-q">Am I allowed to upload my PDFs to an LLM?</summary>
                    <div class="faq-answer" data-i18n="faq-copyright-a">
                        It depends on the content. You must ensure you have the right to share the content with an AI provider. For example, many professors prohibit uploading their lecture slides or materials to third-party services. If you are concerned about privacy or copyright, consider using a local model via LM Studio.
                    </div>
                </details>
                <details>
                    <summary data-i18n="faq-lmstudio-q">What is LM Studio and how do I use it?</summary>
                    <div class="faq-answer" data-i18n="faq-lmstudio-a">
                        LM Studio is a desktop application that allows you to run large language models (LLMs) locally on your own computer. This ensures maximum privacy as your data never leaves your machine. <br><br>
                        1. Download and install it from <a href="https://lmstudio.ai/" target="_blank">lmstudio.ai</a>.<br>
                        2. Download a model within the app (e.g., Llama 3 or Mistral).<br>
                        3. Go to the "Local Server" tab and click "Start Server".<br>
                        4. Note: Running local models requires powerful hardware (ideally with a dedicated GPU and sufficient VRAM).<br>
                        For detailed instructions, check the <a href="https://lmstudio.ai/docs" target="_blank">official documentation</a>.
                    </div>
                </details>
            </div>
        </section>

        <footer>
            <div class="footer-links">
                <a href="https://neamil.de/impressum-datenschutz/" id="impressum-link" target="_blank" data-i18n="impressum-link">Impressum</a>
                <span class="footer-separator">|</span>
                <a href="https://github.com/n3amil/anki-web-ai/issues/new" id="report-issue-link" target="_blank" data-i18n="report-issue-link">Report Issue</a>
                <span class="footer-separator">|</span>
                <a href="mailto:feedback@ankiki.de" id="feedback-link" data-i18n="feedback-link">Feedback or Questions</a>
                <span class="footer-separator">|</span>
                <a href="https://github.com/n3amil/anki-web-ai" target="_blank" data-i18n="github-link">Source Code on GitHub</a>
            </div>
        </footer>
    </div>

    <script src="main.js?v=1769804438"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
